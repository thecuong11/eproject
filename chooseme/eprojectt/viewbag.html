<!DOCTYPE html>
<head>
  <title>Ryana Calendars</title>
  <link rel="stylesheet" href="css/index.css">
  <link rel="stylesheet" href="css/item.css">
  <link rel="stylesheet" href="css/viewbag.css">

  <script src="js/function.js"></script>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>

</head>
<body>
<header class="">
  <div class="container">
    <div class="flex">
      <div class="link">
        <div><a href="index.html">HOME</a></div>
        <div><a href="shop?cat=diaries">SHOP</a></div>
        <div><a href="bloghome.html">BLOG</a></div>
      </div>
      <div class="logo"><a href="index.html"><img src="images/zxc.png" />RYANA CALENDARS</a></div>
      <div  class="bag"><a id="bag" href="viewbag.html">bag</a></div>
    </div>
  </div>
</header>
<div class="bg-dark">
  <nav class="navbar navbar-dark navbar-expand-sm bg-dark container justify-content-center">
    <ul class="navbar-nav">
      <li class="nav-item active">
        <a id="diaries" class="nav-link" href="shop?cat=diaries">Diaries</a>
      </li>
      <li class="nav-item">
        <a id="calendars" class="nav-link" href="shop?cat=calendars">Calendars</a>
      </li>
      <li class="nav-item">
        <a id="pens" class="nav-link" href="shop?cat=pens">Pens</a>
      </li>
    </ul>
  </nav>
</div>
<main>
  <div class="cover container">
    <div id="shoot" >

        <div  class="item-flex">
          <div class="item-image">
            <div><img src="images/d2.jpg" /></div>
          </div>
          <div class="info">
            <p class="name">Diaries 1</p>
            <p class="price">666</p>
            <p><span id="qty" class="badge badge badge-secondary">Quantity: 1</span>
            <button id="plus" type="button" class="btn btn-outline-dark">+</button>
            <button id="minus" type="button" class="btn btn-outline-dark">&#8211;</button></p>
          </div>
        </div>
    </div>
    <div class="total">Total: <span id="totalpay">xxx</span></div>
  </div>
</main>
<footer class="bg-light">
  <div class="container">
    <div class="link-container">
      <div><a href="faqs.html">FAQs</a></div>
      <div><a href="aboutUs.html">About</a></div>
      <div><a href="#">Contact</a></div>
      <div><a href="#">Stores List</a></div>
    </div>
    <div class="social">
      <a href="#" class="fa fa-facebook"></a>
      <a href="#" class="fa fa-twitter"></a>
    </div>
  </div>
  RYANA CALENDARS
</footer>
</body>
<script>
$(document).ready(function(){
  if (localStorage.myBasket === undefined) {
  localStorage.myBasket = '';
  $("#bag").html(0);
  }
  else {
  var arr = localStorage.myBasket.split(",");
  arr.pop();
  //console.log(arr);
  $("#bag").html( count(occur(arr)[1]) );
  }
  $.get("/viewbag/data",{"item_list": localStorage.myBasket},function(data,status){

    data = JSON.parse(data);
      console.log(data);
      //console.log(data["calendars"][0].id);
    var arr = localStorage.myBasket.split(",");
    arr.pop();
    var lis = occur(arr);
    var id_list = lis[0];
    var len = id_list.length;
    var data_len = data.diaries.length;
    var qty_list = lis[1];
    var html = '';
    for (var i=0; i<len; i++) {
      var cat = '';
      var index;
      for (var j=0; j<data_len; j++) {
        if (data['diaries'][j].id == id_list[i]) {
          cat = 'diaries';
          index = j;
        }
      }
      for (var j=0; j<data_len; j++) {
        console.log(j);
        console.log('zzz: '+ data["calendars"][j].id)
        if (data['calendars'][j].id == id_list[i]) {
          cat = 'calendars';
          index = j;
        }
      }
      for (var j=0; j<data_len; j++) {
        if (data['pens'][j].id == id_list[i]) {
          cat = 'pens';
          index = j;
        }
      }
      var addition =
      '<div class="item-flex">\
        <div class="item-image">\
          <div><img src="images/'+ data[cat][index].image1+'"/></div>\
        </div>\
        <div class="info">\
          <p class="name">'+data[cat][index].name+'</p>\
          <p class="price">'+'$'+data[cat][index].price+'</p>\
          <p class="item_id" style="display:none;">'+data[cat][index].id+'</p>\
          <p><span id="qty" class="badge badge badge-secondary">Quantity: '+qty_list[i]+'</span>\
          <button id="plus" type="button" class="btn btn-outline-dark">+</button>\
          <button id="minus" type="button" class="btn btn-outline-dark">&#8211;</button></p>\
        </div>\
      </div>';
      html += addition;
    }

    $("#shoot").html(html);

  });

  ////
});
</script>
</html>
